<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Welcome page</title>
    <link rel="stylesheet" href="welcome.css">
</head>
<body>
    <h1 id="welcome"> Welcome </h1>
    <div id="create">
        <input type="text" id="addIn">
        <button id="addbtn">add</button>
    </div>
    <h3 style="display: flex; text-align: center; justify-content: center;">To do list display here</h3>

    <div id="display"></div>
    <script>
        function edit(i){
             const list=JSON.parse(localStorage.getItem("todoList"));
             const rename=prompt("Enter rename",list[i]);

             list[i]=rename;
            localStorage.setItem("todoList",JSON.stringify(list));       
            window.location.href="welcome.html";

        }
         function dlt(i){
            const list=JSON.parse(localStorage.getItem("todoList"));
           list.splice(i, 1);        
           localStorage.setItem("todoList",JSON.stringify(list));       
            window.location.href="welcome.html";
         }
        function display(){
             const list=JSON.parse(localStorage.getItem("todoList"))||[];
               const display=document.getElementById("display");
               if(!list)return;
             list.forEach((element,i)  => {
                display.innerHTML+=`<div class="list"><div class=index>${i}</div><div class="name">${element}</div><button onClick=edit(${i})>edit</button><button onClick=dlt(${i})>dlt</button></div>`
             });
        }
        const wel=document.getElementById("welcome");
        const name=JSON.parse(localStorage.getItem("user")).name;
        wel.innerText=`Welcome ${name}`;

        const add=document.getElementById("addbtn");
       
        add.addEventListener("click",function(e){
             const task=document.getElementById("addIn");;
          
            const list=JSON.parse(localStorage.getItem("todoList"))||[];
            list.push(task.value);
            localStorage.setItem("todoList",JSON.stringify(list));
            console.log(list);
            console.log(task.value);
            task.value="";
            window.location.href="welcome.html";
        })
        
        display();

    </script>
</body>
</html>